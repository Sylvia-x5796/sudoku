# 数独求解器图表功能说明

## 功能概述

UI已经集成了专业的算法性能对比图表系统，支持：
- 三种算法的实时性能对比
- 多维度数据可视化（时间、节点数、回溯次数）
- 综合性能雷达图
- 图表保存功能

## 图表类型

### 1. 执行时间对比（柱状图）
- **位置**：左上角
- **数据**：三种算法的执行时间（秒）
- **颜色**：
  - 基础DFS：红色 (#FF6B6B)
  - MRV+LCV：青色 (#4ECDC4)
  - AC3+MRV+LCV：蓝色 (#45B7D1)

### 2. 搜索节点数对比（柱状图）
- **位置**：右上角
- **数据**：三种算法的搜索节点总数
- **颜色**：
  - 基础DFS：薄荷绿 (#95E1D3)
  - MRV+LCV：粉红 (#F38181)
  - AC3+MRV+LCV：紫色 (#AA96DA)

### 3. 回溯次数对比（柱状图）
- **位置**：左下角
- **数据**：三种算法的回溯次数
- **颜色**：
  - 基础DFS：浅粉 (#FFB6C1)
  - MRV+LCV：天蓝 (#87CEEB)
  - AC3+MRV+LCV：薄荷 (#98D8C8)

### 4. 综合性能雷达图
- **位置**：右下角
- **维度**：执行时间、搜索节点、回溯次数（归一化）
- **用途**：直观展示三种算法的综合性能差异

## 使用流程

### 步骤1：生成数独
```
1. 选择难度（简单/中等/困难）
2. 点击"生成数独"按钮
3. 等待数独生成完成
```

### 步骤2：运行算法对比
```
1. 点击"对比所有算法"按钮
2. 等待三种算法依次运行
3. 查看右侧文本框的对比结果
```

### 步骤3：查看图表
```
1. 点击"显示统计图表"按钮
2. 在弹出窗口中查看四种图表
3. 可选：点击"保存图表"保存为PNG图片
```

## 数据结构

```python
performance_data = {
    "基础DFS": {
        "time": 0.037,      # 执行时间（秒）
        "nodes": 5723,      # 搜索节点数
        "backtracks": 5672  # 回溯次数
    },
    "MRV+LCV": {
        "time": 0.007,
        "nodes": 78,
        "backtracks": 27
    },
    "AC3+MRV+LCV": {
        "time": 0.203,
        "nodes": 56,
        "backtracks": 5
    }
}
```

## 不同难度的性能差异

### 简单难度
- **基础DFS**：节点数 < 1000，回溯次数 < 500
- **MRV+LCV**：节点数 < 100，回溯次数 < 50
- **AC3+MRV+LCV**：节点数最少，但预处理时间较长

### 中等难度
- **基础DFS**：节点数 3000-8000，回溯次数 2000-7000
- **MRV+LCV**：节点数 50-200，回溯次数 20-100
- **AC3+MRV+LCV**：节点数 30-100，回溯次数 < 20

### 困难难度
- **基础DFS**：节点数 > 10000，回溯次数 > 8000
- **MRV+LCV**：节点数 200-500，回溯次数 100-300
- **AC3+MRV+LCV**：节点数 < 200，回溯次数 < 50

## 图表解读

### 执行时间
- **越低越好**
- MRV+LCV通常最快（中等难度）
- AC3+MRV+LCV在困难题目上表现更好

### 搜索节点数
- **越少越好**
- 反映算法的搜索效率
- AC3+MRV+LCV通常节点数最少

### 回溯次数
- **越少越好**
- 反映算法的决策准确性
- AC3+MRV+LCV回溯次数最少

### 雷达图
- **面积越小越好**
- 三个维度综合评估
- 可直观比较算法优劣

## 保存图表

点击"保存图表"按钮后：
1. 选择保存位置
2. 输入文件名（默认：数独算法对比_时间戳.png）
3. 选择格式（PNG/JPEG）
4. 图表以300 DPI高清保存

## 技术实现

### 使用的库
- **matplotlib**：图表绘制
- **tkinter**：GUI集成
- **FigureCanvasTkAgg**：将matplotlib嵌入tkinter

### 图表配置
```python
# 中文字体支持
plt.rcParams['font.sans-serif'] = ['SimHei']
plt.rcParams['axes.unicode_minus'] = False

# 图表尺寸
fig = plt.figure(figsize=(16, 10))

# 高清保存
fig.savefig(filepath, dpi=300, bbox_inches='tight')
```

## 扩展功能建议

### 1. 多难度对比
可以添加功能，同时显示简单/中等/困难三种难度下的性能对比：

```python
# 数据结构扩展
performance_history = {
    "简单": {...},
    "中等": {...},
    "困难": {...}
}
```

### 2. 历史记录
保存每次运行的数据，生成趋势图：

```python
# 时间序列数据
history = [
    {"timestamp": "2025-01-01 10:00", "difficulty": "中等", "data": {...}},
    {"timestamp": "2025-01-01 10:05", "difficulty": "困难", "data": {...}},
]
```

### 3. 算法效率指标
计算综合效率分数：

```python
efficiency_score = (
    1.0 / time * 0.4 +           # 时间权重40%
    1.0 / nodes * 0.3 +          # 节点权重30%
    1.0 / backtracks * 0.3       # 回溯权重30%
)
```

### 4. 导出报告
生成PDF格式的性能分析报告：

```python
from matplotlib.backends.backend_pdf import PdfPages

with PdfPages('算法性能报告.pdf') as pdf:
    pdf.savefig(fig)
    # 添加更多页面...
```

## 常见问题

### Q1: 图表显示乱码？
**A**: 确保安装了SimHei字体，或修改字体配置：
```python
plt.rcParams['font.sans-serif'] = ['Microsoft YaHei']
```

### Q2: 图表窗口太小？
**A**: 调整窗口大小：
```python
chart_window.geometry("1600x900")  # 增大窗口
```

### Q3: 保存的图片不清晰？
**A**: 已设置为300 DPI，如需更高清晰度：
```python
fig.savefig(filepath, dpi=600)  # 提高到600 DPI
```

### Q4: 如何添加新的图表类型？
**A**: 在`show_chart()`函数中添加新的subplot：
```python
ax5 = plt.subplot(3, 2, 5)  # 添加第5个图表
# 绘制新图表...
```

## 示例输出

### 中等难度对比结果
```
基础DFS算法：耗时0.037秒 | 节点5723 | 回溯5672 | ✓成功
MRV+LCV算法：耗时0.007秒 | 节点78 | 回溯27 | ✓成功
AC3+MRV+LCV算法：耗时0.203秒 | 节点56 | 回溯5 | ✓成功
```

### 性能分析
- **最快算法**：MRV+LCV（0.007秒）
- **最少节点**：AC3+MRV+LCV（56个）
- **最少回溯**：AC3+MRV+LCV（5次）
- **综合最优**：MRV+LCV（平衡速度和效率）
