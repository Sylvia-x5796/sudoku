# 数独求解动画功能说明

## 🎨 动画效果详解

### 核心动画规则

| 动画效果 | 颜色 | 含义 | 触发时机 |
|---------|------|------|---------|
| **蓝色数字** | `#0066ff` | 尝试填入 | 算法尝试某个数字时 |
| **红色闪烁** | `#ff6666` | 回溯撤销 | 发现冲突需要回退时 |
| **灰色消退** | `#999999` | AC3剪枝 | AC3算法削减候选数时 |
| **黑色数字** | `#000000` | 最终确定 | 求解完成后的正确答案 |

---

## 🔍 三种算法的视觉对比

### 1. 深度优先搜索（DFS）

**视觉特征：**
- ❌ **大量红色闪烁** - 频繁回溯
- 📍 **按固定顺序填数** - 从左到右，从上到下
- ⏱️ **速度较慢** - 试错次数多

**动画模式：**
```
蓝色 → 蓝色 → 蓝色 → 红色闪烁 → 蓝色 → 红色闪烁 → ...
（大量试错，频繁回溯）
```

**适合观察：**
- 回溯搜索的基本原理
- 暴力搜索的局限性
- 试错过程的可视化

---

### 2. MRV + LCV 启发式算法

**视觉特征：**
- ✅ **跳跃式填数** - 不按固定顺序
- ✅ **红色闪烁很少** - 智能选择减少回溯
- ⚡ **速度快** - 效率高

**动画模式：**
```
跳到(3,5) → 蓝色 → 跳到(7,2) → 蓝色 → 跳到(1,8) → 蓝色 → ...
（跳跃明显，回溯少）
```

**MRV（最小剩余值）效果：**
- 优先填候选数最少的格子
- 视觉上会"跳"到不同位置

**LCV（最少约束值）效果：**
- 选择对其他格子影响最小的数字
- 减少后续冲突

**适合观察：**
- 启发式搜索的智能性
- 跳跃式填数的策略
- 回溯次数的显著减少

---

### 3. AC-3 + MRV + LCV 算法

**视觉特征：**
- 🎯 **两阶段动画**
- 🧠 **最智能** - 逻辑推理 + 搜索
- ✅ **红色闪烁最少** - 几乎不回溯

**动画模式（两阶段）：**

**阶段1：AC-3约束传播**
```
灰色消退 → 灰色消退 → 灰色消退 → ...
（大量候选数被逻辑推理排除）
```

**阶段2：MRV+LCV搜索**
```
跳到(4,6) → 蓝色 → 跳到(2,3) → 蓝色 → ...
（搜索空间已大幅缩小，几乎不回溯）
```

**AC-3（弧一致性）效果：**
- 先用逻辑推理削减候选数
- 灰色数字逐渐消失
- 减少后续搜索空间

**适合观察：**
- 约束传播的威力
- 两阶段求解过程
- 逻辑推理 vs 搜索的结合

---

## ⚙️ 动画速度设置

### 慢速（150ms间隔）
- **适合：** 观察细节、理解算法
- **场景：** 教学演示、AC3剪枝观察
- **推荐难度：** 简单、中等

### 中速（50ms间隔）- 推荐
- **适合：** 平衡观察和效率
- **场景：** 一般演示、算法对比
- **推荐难度：** 中等、困难

### 快速（10ms间隔）
- **适合：** 快速验证、批量测试
- **场景：** 性能测试、快速演示
- **推荐难度：** 所有难度

---

## 🎯 推荐演示流程

### 演示1：对比回溯频率（5分钟）

**目标：** 直观展示算法优化效果

1. **生成中等难度数独**
2. **运行基础DFS算法**
   - 速度：中
   - 观察：大量红色闪烁
3. **清空并重新生成**
4. **运行MRV+LCV算法**
   - 速度：中
   - 对比：红色闪烁明显减少

**结论：** MRV+LCV将回溯次数从数千次降到几十次！

---

### 演示2：观察AC3剪枝（3分钟）

**目标：** 理解约束传播的威力

1. **生成困难难度数独**
2. **运行AC3+MRV+LCV算法**
   - 速度：慢（重要！）
3. **观察两阶段**
   - 阶段1：大量灰色数字消退
   - 阶段2：跳跃式填数，几乎无回溯

**结论：** AC3通过逻辑推理，在搜索前就排除了大量不可能的选择！

---

### 演示3：性能数据对比（2分钟）

**目标：** 量化算法性能差异

1. **生成任意难度数独**
2. **点击"对比所有算法"**
3. **点击"显示统计图表"**
4. **分析四种图表**

---

## 📊 性能对比数据

### 中等难度典型结果

| 算法 | 时间 | 节点数 | 回溯次数 | 视觉特征 |
|------|------|--------|---------|---------|
| 基础DFS | 0.05s | ~5000 | ~4500 | 大量红色闪烁 |
| MRV+LCV | 0.01s | ~100 | ~50 | 跳跃+少量红色 |
| AC3+MRV+LCV | 0.15s | ~60 | ~10 | 灰色消退+跳跃 |

---

## 💡 使用技巧

### 技巧1：观察AC3剪枝
- 选择"困难"难度
- 选择"AC3+MRV+LCV"算法
- 选择"慢"速度
- 重点观察灰色数字消退

### 技巧2：对比回溯次数
- 同一题目分别用三种算法
- 观察红色闪烁的频率差异
- 理解启发式优化的效果

### 技巧3：观察跳跃模式
- 运行MRV+LCV算法
- 观察填数顺序的跳跃
- 理解"最小剩余值"的含义

---

## 🎨 颜色含义总结

### 蓝色（#0066ff）
- **含义：** 算法正在尝试这个数字
- **出现时机：** 每次赋值操作
- **持续时间：** 根据速度设置

### 红色（#ff6666）
- **含义：** 发现冲突，正在回溯
- **出现时机：** 回溯操作
- **视觉效果：** 快速闪烁后清空

### 灰色（#999999）
- **含义：** 候选数被AC3削减
- **出现时机：** 仅AC3算法
- **视觉效果：** 短暂显示后消失

### 黑色（#000000）
- **含义：** 最终确定的正确答案
- **出现时机：** 求解完成后
- **视觉效果：** 永久显示

---

## 🚀 启动方式

### 方法1：双击批处理文件
```
双击 run_animated.bat
```

### 方法2：命令行启动
```bash
cd sudoku
python UI/ui_v5_animated.py
```

---

## 📝 总结

### 实现的功能
✅ 尝试填入（蓝色）
✅ 回溯撤销（红色闪烁）
✅ AC3剪枝（灰色消退）
✅ 最终确定（黑色）
✅ 速度可调（慢/中/快）
✅ 三种算法对比
✅ 性能统计图表

### 视觉对比效果
✅ DFS：大量红色闪烁
✅ MRV+LCV：跳跃式填数，少量红色
✅ AC3：灰色消退 → 跳跃填数

### 教学价值
✅ 直观理解回溯搜索
✅ 体会启发式优化
✅ 理解约束传播
✅ 量化性能差异

---

**祝你使用愉快！** 🎉
